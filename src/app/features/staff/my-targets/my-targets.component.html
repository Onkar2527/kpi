<div class="container mt-4">
  <h2>My Targets</h2>
  <p>Your personal and branch-level targets for the current period.</p>

  <div class="card">
    <div class="card-header">
      <h4>Personal Targets</h4>
    </div>
    <div class="card-body">
      <table class="table table-bordered table-striped">
        <thead class="table-dark">
          <tr>
            <th>KPI</th>
            <th>Weightage</th>
            <th>Target Amount</th>
            <th>Achieved</th>
            <th>Out of 10</th>
            <th>Weightage Score</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let target of staffAll">
            <td>{{ target.kpi }}</td>
            <td>{{ target.weightage }}</td>
            <td>{{ target.amount }}</td>
            <td>{{ target.achieved || 0 }}</td>
            <td>{{ target.outOf10 | number:'1.2-2' }}</td>
            <td>{{ target.weightageScore | number:'1.2-2' }}</td>
          </tr>
        </tbody>
        <tfoot>
          <tr>
            <td colspan="5" class="text-end"><strong>Total</strong></td>
            <td><strong>{{ personalTotalWeightageScore | number:'1.2-2' }}</strong></td>
          </tr>
        </tfoot>
      </table>
    </div>
  </div>

  <!-- <div class="card mt-4" *ngIf="auth.user?.role !== 'attender'">
    <div class="card-header">
      <h4>Branch-Level Targets</h4>
    </div>
    <div class="card-body">
      <table class="table table-bordered table-striped">
        <thead class="table-dark">
          <tr>
            <th>KPI</th>
            <th>Weightage</th>
            <th>Target Amount</th>
            <th>Achieved</th>
            <th>Out of 10</th>
            <th>Weightage Score</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let target of branchTargets">
            <td>{{ target.kpi }}</td>
            <td>{{ target.weightage }}</td>
            <td>{{ target.amount }}</td>
            <td>{{ target.achieved || 0 }}</td>
            <td>{{ target.outOf10 | number:'1.2-2' }}</td>
            <td>{{ target.weightageScore | number:'1.2-2' }}</td>
          </tr>
        </tbody>
        <tfoot>
          <tr>
            <td colspan="5" class="text-end"><strong>Total</strong></td>
            <td><strong>{{ branchTotalWeightageScore | number:'1.2-2' }}</strong></td>
          </tr>
        </tfoot>
      </table>
    </div>
  </div> -->

  <div class="card mt-4">
    <div class="card-header">
      <h4>Grand Total</h4>
    </div>
    <div class="card-body">
      <p><strong>Total Weightage Score:</strong> {{ grandTotalWeightageScore | number:'1.2-2' }}</p>
    </div>
  </div>

   <div class="card mt-4" *ngIf="auth.user?.role === 'Clerk' ">
    <div class="card-header">
      <h4>Salary Details</h4>
    </div>
    <div class="card-body">
      <table class="table table-bordered">
        <thead class="table-info">
          <tr>
            <th>Designation</th>
            <th>Basic</th>
            <th>Increment Basic.</th>
            <th>KPI Based</th>
            <th>Tot. Basic</th>
            <th>DA</th>
            <th>Tot. Salary</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Clerk</td>
            <td>{{ salary | number:'1.2-2' }}</td>
            <td>{{ incrementAmt | number:'1.2-2' }}</td>
            <td>{{ calculateKpiBasedIncrement() | number:'1.2-2' }}</td>
            <td>{{ calculateTotalSalary() | number:'1.2-2' }}</td>
            <td>25%</td>
            <td>{{finalSalary() | number:'1.2-2'}}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
